<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Management - PatientPulse</title>
    <link rel="stylesheet" href="../css/dashboard.css">
    <link rel="stylesheet" href="../css/employees.css">
    <link href="https://fonts.googleapis.com/css?family=Inter:400,500,600,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <aside class="sidebar">
        <div class="logo">
            <img src="../images/logo.png" alt="PatientPulse" class="logo-img" style="width: 40px; height: 40px; border-radius: 8px;">
            PatientPulse
        </div>
        <nav>
            <ul>
                <li><a href="dashboard.html"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="patient.html"><i class="fas fa-users"></i> Patients</a></li>
                <li><a href="devices.html"><i class="fas fa-laptop"></i> Devices</a></li>
                <li><a href="employees.html" class="active"><i class="fas fa-user-tie"></i> Employees</a></li>
                <li><a href="departments.html"><i class="fas fa-building"></i> Departments</a></li>
                <li><a href="alerts.html"><i class="fas fa-bell"></i> Alerts</a></li>
                <li><a href="#"><i class="fas fa-chart-bar"></i> Reports</a></li>
                <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
            </ul>
        </nav>
        <button class="logout-btn" onclick="showLogoutModal()"><i class="fas fa-sign-out-alt"></i> Logout</button>
        <div class="user">
            <div class="user-avatar">AD</div>
            <div class="user-info">
                <div class="user-name">Admin User</div>
                <div class="user-email">admin@patientpulse.com</div>
            </div>
        </div>
    </aside>

    <div class="main">
        <div class="page-header">
            <div>
                <h1>Employee Management</h1>
                <div class="employee-count" id="employeeCount">Loading...</div>
            </div>
            <button class="add-employee-btn"><i class="fas fa-plus"></i> Add Employee</button>
        </div>

        <div class="employee-controls">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Search employees by name, ID, department...">
            </div>
            <div class="filters">
                <select class="filter-select" id="departmentFilter">
                    <option value="">All Departments</option>
                </select>
                <select class="filter-select" id="jobTitleFilter">
                    <option value="">All Job Titles</option>
                    <option value="Doctor">Doctor</option>
                    <option value="Nurse">Nurse</option>
                    <option value="Admin Staff">Admin Staff</option>
                    <option value="HR">HR</option>
                    <option value="IT">IT</option>
                    <option value="Technician">Technician</option>
                    <option value="Pharmacist">Pharmacist</option>
                    <option value="Receptionist">Receptionist</option>
                </select>
                <select class="filter-select" id="statusFilter">
                    <option value="">All Status</option>
                    <option value="Active">Active</option>
                    <option value="Inactive">Inactive</option>
                    <option value="On Leave">On Leave</option>
                    <option value="Resigned">Resigned</option>
                </select>
            </div>
        </div>

        <div class="table-container">
            <table class="employees-table">
                <thead>
                    <tr>
                        <th><input type="checkbox" id="selectAll"></th>
                        <th>Employee</th>
                        <th>Employee ID</th>
                        <th>Department</th>
                        <th>Job Title</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="employeesTableBody">
                    <!-- Employee data will be loaded dynamically from database -->
                </tbody>
            </table>
        </div>
    </div>

    <script src="../js/dashboard.js"></script>
    <script src="../js/employees.js"></script>

    <!-- Add Employee Modal -->
    <div id="addEmployeeModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Add New Employee</h2>
                <button class="modal-close" data-modal="addEmployeeModal">&times;</button>
            </div>
            <form id="addEmployeeForm">
                <!-- Personal Information Section -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-user"></i> Personal Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="addFirstName">First Name *</label>
                            <input type="text" id="addFirstName" name="first_name" placeholder="Enter first name" required>
                        </div>
                        <div class="form-group">
                            <label for="addMiddleName">Middle Name</label>
                            <input type="text" id="addMiddleName" name="middle_name" placeholder="Enter middle name">
                        </div>
                        <div class="form-group">
                            <label for="addLastName">Last Name *</label>
                            <input type="text" id="addLastName" name="last_name" placeholder="Enter last name" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="addGender">Gender *</label>
                            <select id="addGender" name="gender" required>
                                <option value="">Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                                <option value="Prefer not to say">Prefer not to say</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="addDateOfBirth">Date of Birth *</label>
                            <input type="date" id="addDateOfBirth" name="date_of_birth" required>
                        </div>
                    </div>
                </div>

                <!-- Contact Information Section -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-address-card"></i> Contact Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="addEmail">Email Address *</label>
                            <input type="email" id="addEmail" name="email" placeholder="employee@hospital.com" required>
                        </div>
                        <div class="form-group">
                            <label for="addPhone">Phone Number *</label>
                            <input type="tel" id="addPhone" name="phone_number" placeholder="+63 XXX XXX XXXX" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="addAddress">Address</label>
                        <input type="text" id="addAddress" name="address" placeholder="Enter full address">
                    </div>
                </div>

                <!-- Work Information Section -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-briefcase"></i> Work Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="addDepartment">Department *</label>
                            <select id="addDepartment" name="department_id" required>
                                <option value="">Select Department</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="addJobTitle">Job Title *</label>
                            <select id="addJobTitle" name="job_title" required>
                                <option value="">Select Job Title</option>
                                <option value="Doctor">Doctor</option>
                                <option value="Nurse">Nurse</option>
                                <option value="Admin Staff">Admin Staff</option>
                                <option value="HR">HR</option>
                                <option value="IT">IT</option>
                                <option value="Technician">Technician</option>
                                <option value="Pharmacist">Pharmacist</option>
                                <option value="Receptionist">Receptionist</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="addEmploymentType">Employment Type *</label>
                            <select id="addEmploymentType" name="employment_type" required>
                                <option value="">Select Type</option>
                                <option value="Full-time">Full-time</option>
                                <option value="Part-time">Part-time</option>
                                <option value="Contract">Contract</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="addHireDate">Hire Date *</label>
                            <input type="date" id="addHireDate" name="hire_date" required>
                        </div>
                        <div class="form-group">
                            <label for="addEmploymentStatus">Employment Status *</label>
                            <select id="addEmploymentStatus" name="employment_status" required>
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                                <option value="On Leave">On Leave</option>
                                <option value="Resigned">Resigned</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-cancel" data-modal="addEmployeeModal">Cancel</button>
                    <button type="submit" class="btn-save">Add Employee</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Employee Modal -->
    <div id="editEmployeeModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Edit Employee</h2>
                <button class="modal-close" data-modal="editEmployeeModal">&times;</button>
            </div>
            <form id="editEmployeeForm">
                <input type="hidden" id="editEmployeeDbId">
                
                <!-- Identification Section -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-id-card"></i> Identification</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editEmployeeId">Employee ID</label>
                            <input type="text" id="editEmployeeId" name="employee_id" readonly>
                        </div>
                        <div class="form-group">
                            <label for="editEmployeeNumber">Employee Number</label>
                            <input type="text" id="editEmployeeNumber" name="employee_number" readonly>
                        </div>
                    </div>
                </div>

                <!-- Personal Information Section -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-user"></i> Personal Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editFirstName">First Name *</label>
                            <input type="text" id="editFirstName" name="first_name" required>
                        </div>
                        <div class="form-group">
                            <label for="editMiddleName">Middle Name</label>
                            <input type="text" id="editMiddleName" name="middle_name">
                        </div>
                        <div class="form-group">
                            <label for="editLastName">Last Name *</label>
                            <input type="text" id="editLastName" name="last_name" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editGender">Gender *</label>
                            <select id="editGender" name="gender" required>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                                <option value="Prefer not to say">Prefer not to say</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editDateOfBirth">Date of Birth *</label>
                            <input type="date" id="editDateOfBirth" name="date_of_birth" required>
                        </div>
                    </div>
                </div>

                <!-- Contact Information Section -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-address-card"></i> Contact Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editEmail">Email Address *</label>
                            <input type="email" id="editEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="editPhone">Phone Number *</label>
                            <input type="tel" id="editPhone" name="phone_number" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editAddress">Address</label>
                        <input type="text" id="editAddress" name="address">
                    </div>
                </div>

                <!-- Work Information Section -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-briefcase"></i> Work Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editDepartment">Department *</label>
                            <select id="editDepartment" name="department_id" required>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editJobTitle">Job Title *</label>
                            <select id="editJobTitle" name="job_title" required>
                                <option value="Doctor">Doctor</option>
                                <option value="Nurse">Nurse</option>
                                <option value="Admin Staff">Admin Staff</option>
                                <option value="HR">HR</option>
                                <option value="IT">IT</option>
                                <option value="Technician">Technician</option>
                                <option value="Pharmacist">Pharmacist</option>
                                <option value="Receptionist">Receptionist</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editEmploymentType">Employment Type *</label>
                            <select id="editEmploymentType" name="employment_type" required>
                                <option value="Full-time">Full-time</option>
                                <option value="Part-time">Part-time</option>
                                <option value="Contract">Contract</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editHireDate">Hire Date *</label>
                            <input type="date" id="editHireDate" name="hire_date" required>
                        </div>
                        <div class="form-group">
                            <label for="editEmploymentStatus">Employment Status *</label>
                            <select id="editEmploymentStatus" name="employment_status" required>
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                                <option value="On Leave">On Leave</option>
                                <option value="Resigned">Resigned</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-cancel" data-modal="editEmployeeModal">Cancel</button>
                    <button type="submit" class="btn-save">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Status Modal -->
    <div id="statusModal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h2 id="statusTitle">Success</h2>
                <button class="modal-close" data-modal="statusModal">&times;</button>
            </div>
            <div id="statusMessage" style="padding: 20px; text-align: center; font-size: 1rem; color: #374151;">
                Operation completed successfully
            </div>
            <div class="form-actions" style="padding: 0 20px 20px 20px;">
                <button type="button" class="btn-save" onclick="closeStatusModal()" style="width: 100%;">OK</button>
            </div>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h2 id="confirmTitle" style="color: #ef4444;">Confirm Delete</h2>
                <button class="modal-close" onclick="closeConfirmModal()">&times;</button>
            </div>
            <div id="confirmMessage" style="padding: 20px; text-align: center; font-size: 1rem; color: #374151;">
                Are you sure you want to delete this employee?
            </div>
            <div class="form-actions" style="padding: 0 20px 20px 20px; display: flex; gap: 12px;">
                <button type="button" class="btn-cancel" onclick="closeConfirmModal()" style="flex: 1;">Cancel</button>
                <button type="button" class="btn-delete" onclick="confirmDelete()" style="flex: 1; background: #ef4444; color: white; border: none; border-radius: 8px; padding: 12px; cursor: pointer;">Delete</button>
            </div>
        </div>
    </div>

    <!-- View Employee Modal -->
    <div id="viewEmployeeModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Employee Details</h2>
                <button class="modal-close" onclick="closeViewEmployeeModal()">&times;</button>
            </div>
            <div style="padding: 20px;">
                <!-- Employee Header -->
                <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 24px; padding-bottom: 20px; border-bottom: 1px solid #e5e7eb;">
                    <div class="employee-avatar" style="width: 80px; height: 80px; font-size: 2rem; background: #8b5cf6; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center;" id="viewEmployeeAvatar">EM</div>
                    <div>
                        <h3 id="viewEmployeeName" style="margin: 0 0 8px 0; font-size: 1.5rem; color: #1f2937;">Employee Name</h3>
                        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                            <span id="viewEmployeeJobBadge" class="role-badge doctor">Doctor</span>
                            <span id="viewEmployeeStatusBadge" class="status-badge active">Active</span>
                        </div>
                    </div>
                </div>

                <!-- Details Grid -->
                <div class="view-details-grid">
                    <!-- Identification -->
                    <div class="detail-section">
                        <h4><i class="fas fa-id-card"></i> Identification</h4>
                        <div class="detail-row">
                            <span class="detail-label">Employee ID</span>
                            <span class="detail-value" id="viewEmployeeId">EMP-0001</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Employee Number</span>
                            <span class="detail-value" id="viewEmployeeNumber">EMP-0001</span>
                        </div>
                    </div>

                    <!-- Personal Info -->
                    <div class="detail-section">
                        <h4><i class="fas fa-user"></i> Personal Info</h4>
                        <div class="detail-row">
                            <span class="detail-label">Full Name</span>
                            <span class="detail-value" id="viewFullName">John Doe</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Gender</span>
                            <span class="detail-value" id="viewGender">Male</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Date of Birth</span>
                            <span class="detail-value" id="viewDateOfBirth">Jan 1, 1990</span>
                        </div>
                    </div>

                    <!-- Contact Info -->
                    <div class="detail-section">
                        <h4><i class="fas fa-address-card"></i> Contact Info</h4>
                        <div class="detail-row">
                            <span class="detail-label">Email</span>
                            <span class="detail-value" id="viewEmail">john@hospital.com</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Phone</span>
                            <span class="detail-value" id="viewPhone">+63 XXX XXX XXXX</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Address</span>
                            <span class="detail-value" id="viewAddress">123 Main St</span>
                        </div>
                    </div>

                    <!-- Work Info -->
                    <div class="detail-section">
                        <h4><i class="fas fa-briefcase"></i> Work Information</h4>
                        <div class="detail-row">
                            <span class="detail-label">Department</span>
                            <span class="detail-value" id="viewDepartment">Emergency</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Job Title</span>
                            <span class="detail-value" id="viewJobTitle">Doctor</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Employment Type</span>
                            <span class="detail-value" id="viewEmploymentType">Full-time</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Hire Date</span>
                            <span class="detail-value" id="viewHireDate">Jan 1, 2020</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Status</span>
                            <span class="detail-value" id="viewEmploymentStatus">Active</span>
                        </div>
                    </div>

                </div>
            </div>
            <div class="form-actions" style="padding: 0 20px 20px 20px;">
                <button type="button" class="btn-save" onclick="closeViewEmployeeModal()" style="width: 100%;">Close</button>
            </div>
        </div>
    </div>

    <!-- Logout Confirmation Modal -->
    <div id="logoutModal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h2 style="color: #f59e0b;">Confirm Logout</h2>
                <button class="modal-close" onclick="closeLogoutModal()">&times;</button>
            </div>
            <div style="padding: 20px; text-align: center; font-size: 1rem; color: #374151;">
                <i class="fas fa-sign-out-alt" style="font-size: 3rem; color: #f59e0b; margin-bottom: 16px;"></i>
                <p>Are you sure you want to log out?</p>
            </div>
            <div class="form-actions" style="padding: 0 20px 20px 20px; display: flex; gap: 12px;">
                <button type="button" class="btn-cancel" onclick="closeLogoutModal()" style="flex: 1;">Cancel</button>
                <button type="button" class="btn-save" onclick="confirmLogout()" style="flex: 1; background: #f59e0b;">Logout</button>
            </div>
        </div>
    </div>
</body>
</html>
